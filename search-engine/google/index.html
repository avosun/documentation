<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="All about scrapping google with SERPS - Generate URLs and analyse the google pages.">
        
        <link rel="canonical" href="https://serp-spider.github.io/documentation/search-engine/google/">
        <link rel="shortcut icon" href="../../../../favicon.ico">
        

	    <title>Google - Documentation - The SERP Spider</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">        <link href="../../css/base.css" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet' type='text/css'>

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-75620778-1', 'serp-spider.github.io');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="/"><img alt='SERPS logo' src="../../images/logo.png">SERPS</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../..">About SERPS</a>
</li>

                        
                            
<li >
    <a href="../../overview/">Overview</a>
</li>

                        
                            
<li >
    <a href="../../cookies/">Cookies</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Search Engines <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li class="active">
    <a href="./">Google</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Http Clients <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../http-client/curl/">CURL</a>
</li>

                        
                            
<li >
    <a href="../../http-client/phantomJS/">PhantomJS</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../about/packages/">Packages</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li>
                        <a href="https://github.com/serp-spider">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">

    <div class="alpha-banner">
        <i class="fa fa-exclamation-circle"></i>
        The project is in alpha phase
        <i class="fa fa-exclamation-circle"></i>
    </div>

    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#google-client">Google Client</a></li>
        
            <li class="level-2"><a href="#installation">Installation</a></li>
            
        
            <li class="level-2"><a href="#overview">Overview</a></li>
            
        
            <li class="level-2"><a href="#working-with-urls">Working with urls</a></li>
            
                <li class="level-3"><a href="#create-an-url">Create an url</a></li>
                    
            
                <li class="level-3"><a href="#url-from-a-string">Url from a string</a></li>
                    
            
                <li class="level-3"><a href="#google-domain">Google domain</a></li>
                    
            
                <li class="level-3"><a href="#add-and-remove-parameters">Add and remove parameters</a></li>
                    
            
                <li class="level-3"><a href="#raw-parameters">Raw parameters</a></li>
                    
            
                <li class="level-3"><a href="#more-parameters">More parameters</a></li>
                    
            
        
            <li class="level-2"><a href="#parsing-results">Parsing results</a></li>
            
        
            <li class="level-2"><a href="#proxy-usage">Proxy usage</a></li>
            
        
            <li class="level-2"><a href="#cookie-usage">Cookie usage</a></li>
            
        
            <li class="level-2"><a href="#solve-a-captcha">Solve a Captcha</a></li>
            
        
    
    </ul>
</div></div>
                <div class="col-md-9" id="main-content" role="main">

<h1 id="google-client">Google Client</h1>
<p><img class="frameless-image" alt="Google logo" src="../../images/logo-google.png"/></p>
<p><center>Everything about the google client</center></p>
<hr />
<p>Jump to:</p>
<ul>
<li><a href="parse-page/"><strong>Parse a google page</strong></a><ul>
<li><a href="parse-page/#natural-results"><strong>Parse natural results</strong></a></li>
<li><a href="parse-page/#adwords-results"><strong>Parse adwords results</strong></a></li>
</ul>
</li>
</ul>
<hr />
<h2 id="installation">Installation</h2>
<p>The google client is available with the package 
<a href="https://packagist.org/packages/serps/search-engine-google">serps/search-engine-google</a>: </p>
<p><code>$ composer require 'serps/search-engine-google'</code></p>
<h2 id="overview">Overview</h2>
<p>The google client needs a http client interface to be constructed and an url to be parsed.</p>
<pre><code class="php">    use Serps\SearchEngine\Google\GoogleClient;
    use Serps\HttpClient\CurlClient;
    use Serps\SearchEngine\Google\GoogleUrl;

    // Create a google client using the curl http client
    $googleClient = new GoogleClient(new CurlClient());

    // Create the url that will be parsed
    $googleUrl = new GoogleUrl();
    $google-&gt;setSearchTerm('simpsons');

    $response = $googleClient-&gt;query($googleUrl);

    $results = $response-&gt;getNaturalResults();

    foreach($results as $result){
        // Do stuff
    }
</code></pre>

<h2 id="working-with-urls">Working with urls</h2>
<p><code>GoogleUrl</code> class offers many convenient tools to work with google urls.</p>
<h3 id="create-an-url">Create an url</h3>
<p>The url builder has the required tools to build an url from scratch.</p>
<pre><code class="php">    use Serps\SearchEngine\Google\GoogleUrl;

    $googleUrl = new GoogleUrl();
    $googleUrl-&gt;setSearchTerm('simpsons');
    $googleUrl-&gt;setLanguageRestriction('lang_en');
    echo $googleUrl-&gt;buildUrl();
    // https://google.com/search?q=simpsons&amp;lr=lang_en
</code></pre>

<h3 id="url-from-a-string">Url from a string</h3>
<p>It's also possible to parse an an existing google url string to an url object.</p>
<pre><code class="php">    use Serps\SearchEngine\Google\GoogleUrl;

    $googleUrl = GoogleUrl::fromString('https://google.com/search?q=simpsons');
    echo $googleUrl-&gt;getSearchTerm();
    // simpsons
</code></pre>

<p>Additionally you can continue to manipulate this url</p>
<pre><code class="php">    $googleUrl-&gt;setLanguageRestriction('lang_en');
    echo $googleUrl-&gt;buildUrl();
    // https://google.com/search?q=simpsons&amp;lr=lang_en
</code></pre>

<h3 id="google-domain">Google domain</h3>
<p>By default an url is generated for <code>google.com</code> but you can choose any domain of your choice:</p>
<pre><code class="php">    use Serps\SearchEngine\Google\GoogleUrl;

    $googleUrl = new GoogleUrl('google.fr');
    $googleUrl-&gt;setSearchTerm('simpsons');
    echo $googleUrl-&gt;buildUrl();
    // https://google.fr/search?q=simpsons
</code></pre>

<p>It's also possible to modify it latter</p>
<pre><code class="php">    $googleUrl-&gt;setHost('google.de');
    echo $googleUrl-&gt;buildUrl();
    // https://google.de/search?q=simpsons
</code></pre>

<h3 id="add-and-remove-parameters">Add and remove parameters</h3>
<p>It's possible to add or remove parameters</p>
<pre><code class="php">    use Serps\SearchEngine\Google\GoogleUrl;

    $googleUrl = new GoogleUrl();
    $googleUrl-&gt;setParam('q', 'simpsons');
    $googleUrl-&gt;setParam('start', 11);
    echo $googleUrl-&gt;buildUrl();
    // https://google.com/search?q=simpsons&amp;start=11

    $googleUrl-&gt;removeParam('start');
    echo $googleUrl-&gt;buildUrl();
    // https://google.com/search?q=simpsons
</code></pre>

<h3 id="raw-parameters">Raw parameters</h3>
<p>By default parameters are encoded for urls. For instance <code>"Homer Simpsons"</code> will become <code>"Homer+Simpsons"</code>
but <code>"Homer+Simpsons"</code> will become <code>"Homer%2BSimpson"</code></p>
<pre><code class="php">    use Serps\SearchEngine\Google\GoogleUrl;

    $googleUrl = new GoogleUrl();
    $googleUrl-&gt;setParam('q', 'Homer+Simpson');
    echo $googleUrl-&gt;buildUrl();
    // https://google.com/search?q=Homer%2BSimpson
</code></pre>

<p>It's possible to deal with raw params, this way the param will be passed to the url with no additional encoding. 
That is achieved by passing true as the third argument of <code>setParam</code>.</p>
<pre><code class="php">    $googleUrl = new GoogleUrl();
    $googleUrl-&gt;setParam('q', 'Homer+Simpson', true);
    echo $googleUrl-&gt;buildUrl();
    // https://google.com/search?q=Homer+Simpson
</code></pre>

<h3 id="more-parameters">More parameters</h3>
<p>Some parameters are very common and for some of them we created convenient shortcuts.</p>
<p>TODO</p>
<h2 id="parsing-results">Parsing results</h2>
<p>The google client is also responsible for parsing the page and outputting a standard result set.</p>
<p>A page can return different kind of results. For convenience the guide for parsing a page has its own page: <a href="parse-page/"><strong>view the guide</strong></a></p>
<h2 id="proxy-usage">Proxy usage</h2>
<p>You can use a proxy at the request time</p>
<pre><code class="php">    use Serps\SearchEngine\Google\GoogleClient;
    use Serps\HttpClient\CurlClient;
    use Serps\SearchEngine\Google\GoogleUrl;
    use Serps\Core\Http\Proxy;

    $googleClient = new GoogleClient(new CurlClient());

    $googleUrl = new GoogleUrl();
    $google-&gt;setSearchTerm('simpsons');

    $proxy = new Proxy('1.1.1.1', 8080);

    $response = $googleClient-&gt;query($googleUrl, $proxy);
</code></pre>

<h2 id="cookie-usage">Cookie usage</h2>
<p>The google client can persist cookies across several requests. 
By default it is disabled, to enable it, simply do:</p>
<pre><code class="php">    $googleClient-&gt;enableCookies();
</code></pre>

<p>And to disable it again:</p>
<pre><code class="php">    $googleClient-&gt;disableCookies();
</code></pre>

<p>You can also get the current state of the cookieJar:</p>
<pre><code class="php">    $googleClient-&gt;getCookieJar();
</code></pre>

<p>Or set a custom CookieJar</p>
<pre><code class="php">    $googleClient-&gt;setCookieJar($cookieJar);
</code></pre>

<p>View the dedicated <a href="../../cookies/">cookie documentation</a></p>
<h2 id="solve-a-captcha">Solve a Captcha</h2>
<p>Solving captcha is not implemented at the moment</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>
                This is an open-source project built for you with <i style="color:#c24b48;" class="fa fa-heart"></i>
                by <a href="https://github.com/gsouf">Soufiane Ghzal</a> and contributors.
                <br/>
                The documentation is generated with <a href="http://www.mkdocs.org/">MkDocs</a>
            </p>
        </footer>

        <script   src="https://code.jquery.com/jquery-1.12.2.js"   integrity="sha256-VUCyr0ZXB5VhBibo2DkTVhdspjmxUgxDGaLQx7qb7xY="   crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    <script>
        ((window.gitter = {}).chat = {}).options = {
            room: 'serp-spider/help'
        };
        require.config({
            paths: {
                "sidecar": "https://sidecar.gitter.im/dist/sidecar.v1"
            }
        });
        require( ["sidecar"], function ($) {
                    console.log('sidecar loaded');
                }
        );
    </script>

    </body>
</html>
